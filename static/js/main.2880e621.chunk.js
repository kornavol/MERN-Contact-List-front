(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},38:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n.n(c),o=n(17),s=n.n(o),r=(n(26),n(27),n(2)),l=n(20),i=n(21),u=n(9),d=(n(28),n(0)),h=function(t){var e=t.contact,n=t.deleteContact,a=e.fullName,o=e.email,s=e.phone,r=e.address,l={_id:e._id},i=Object(c.useState)(!1),h=Object(u.a)(i,2),j=h[0],f=h[1],b=Object(c.useState)("white"),p=Object(u.a)(b,2),O=p[0],m=p[1],g=function(t){var e,n=t.target.getAttribute("data-id");e="file"==n?t.target.files[0]:t.target.innerText,l[n]=e},v=function(t){console.log(t),13==t.charCode&&t.preventDefault()};return Object(d.jsxs)("div",{className:"card",style:{backgroundColor:O},children:[Object(d.jsx)("div",{"data-id":"fullName",onKeyPress:v,onBlur:g,contentEditable:j,children:a}),Object(d.jsx)("div",{"data-id":"email",onKeyPress:v,onBlur:g,contentEditable:j,children:o}),Object(d.jsx)("div",{"data-id":"phone",onKeyPress:v,onBlur:g,contentEditable:j,children:s}),Object(d.jsx)("div",{"data-id":"address",onKeyPress:v,onBlur:g,contentEditable:j,children:r}),Object(d.jsx)("button",{onClick:function(){f(!j),m(j?"white":"lavender")},children:"\u270f\ufe0f"}),Object(d.jsx)("button",{onClick:function(){console.log(l);var t=new FormData;Object.keys(l).forEach((function(e){t.append(e,l[e])}));var e={method:"POST",headers:{"x-auth-tocken":localStorage.getItem("token")},body:JSON.stringify(t)};fetch("http://localhost:8080/contacts/update",e).then((function(t){return t.json().then((function(t){"success"===t.status?(f(!1),m("green")):m("coral")}))})).catch((function(t){return m("coral")}))},children:"\ud83d\udcbe"}),Object(d.jsx)("button",{onClick:n,children:"\ud83d\uddd1\ufe0f"})]})};var j=function(){var t=this,e=Object(c.useState)({fullName:"",email:"",phone:"",address:""}),n=Object(u.a)(e,2),a=n[0],o=n[1],s=Object(c.useState)([{_id:"1",fullName:"test",email:"t@t.com",phone:"123456",address:"test"}]),j=Object(u.a)(s,2),f=j[0],b=j[1],p={"Content-Type":"application/json","x-auth-tocken":localStorage.getItem("token")},O=[],m=Object(r.f)(),g=function(t,e){var n=Object(i.a)({},a);n[e]=t.target.value,o(n)};Object(c.useEffect)((function(){var t="".concat("http://localhost:8080","/contacts/all");fetch(t,{mode:"cors",headers:p}).then((function(t){return t.json().then((function(t){"success"==t.status?b(t.data):console.log(t)}))}))}),[]),Object(c.useEffect)((function(){localStorage.getItem("token")||m.push("/auth")}));var v=function(t){var e="".concat("http://localhost:8080","/contacts/delete/")+t,n={method:"DELETE",headers:p};console.log(e),fetch(e,n).then((function(t){return t.json().then((function(t){if("success"===t.status){var e=f.filter((function(e){if(e._id!=t.data)return e}));b(e)}else alert("There's an error. For details please check the console."),console.log(t.message)}))})).catch((function(t){alert(t)}))};return"object"==typeof f&&f.length>0&&(O=f.map((function(e){return Object(d.jsx)(h,{contact:e,deleteContact:v.bind(t,e._id)},e._id)}))),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault();var e="".concat("http://localhost:8080","/contacts/new"),n={method:"POST",headers:p,body:JSON.stringify(a)};fetch(e,n).then((function(t){return t.json().then((function(t){return b([].concat(Object(l.a)(f),[t]))}))}))},children:[Object(d.jsx)("input",{required:!0,placeholder:"Full name",value:a.fullName,onChange:function(t){return g(t,"fullName")}}),Object(d.jsx)("input",{type:"email",placeholder:"Email",value:a.email,onChange:function(t){return g(t,"email")}}),Object(d.jsx)("input",{type:"tel",placeholder:"Phone number",value:a.phone,onChange:function(t){return g(t,"phone")}}),Object(d.jsx)("input",{placeholder:"Address",value:a.address,onChange:function(t){return g(t,"address")}}),Object(d.jsx)("button",{children:"Create Contact"})]}),Object(d.jsx)("section",{className:"contact-list",children:O})]})},f=n(19),b=(n(38),function(){return Object(d.jsxs)("div",{id:"get-contact",children:[Object(d.jsx)("h1",{children:"Get Contact"}),Object(d.jsxs)("form",{className:"contact-form",onSubmit:function(t){t.preventDefault();var e=new FormData,n=t.target[4].files;if(e.append("fullName",t.target[0].value),e.append("email",t.target[1].value),e.append("phone",t.target[2].value),e.append("message",t.target[3].value),console.log(typeof n),0!=n.length){var c,a=Object(f.a)(n);try{for(a.s();!(c=a.n()).done;){var o=c.value;e.append("attachs",o)}}catch(r){a.e(r)}finally{a.f()}}var s="".concat("http://localhost:8080","/get-contact");fetch(s,{method:"POST",body:e}).then((function(t){return t.json().then((function(t){"success"===t.status?console.log("Congats"):console.log(t.message)}))}))},children:[Object(d.jsx)("input",{type:"text",placeholder:"Full Name"}),Object(d.jsx)("input",{type:"email",placeholder:"Email"}),Object(d.jsx)("input",{type:"text",placeholder:"Phone"}),Object(d.jsx)("textarea",{type:"text",placeholder:"Message"}),Object(d.jsx)("input",{type:"file",multiple:!0}),Object(d.jsx)("button",{children:"Get Contact"})]})]})}),p=(n(39),function(t){var e=Object(r.f)();return Object(d.jsx)("div",{className:"wrapper",children:Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={};n.email=t.target[0].value,n.pass=t.target[1].value;var c="".concat("http://localhost:8080","/auth/register"),a="".concat("http://localhost:8080","/auth/login"),o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};"register"==t.nativeEvent.submitter.id?fetch(c,o).then((function(t){return t.json().then((function(t){"success"==t.status?alert("Congrats, you registered as well! Please login."):alert(t.message)}))})):"login"==t.nativeEvent.submitter.id&&fetch(a,o).then((function(t){return t.json().then((function(t){console.log(t),"success"==t.status?(alert(t.status),localStorage.setItem("token",t.token),e.push("/contacts")):alert(t.status)}))}))},children:[Object(d.jsx)("input",{name:"email",type:"email"}),Object(d.jsx)("input",{name:"pass",type:"password"}),Object(d.jsxs)("section",{children:[Object(d.jsx)("input",{id:"register",type:"submit",value:"Register"}),Object(d.jsx)("input",{id:"login",type:"submit",value:"Login"})]})]})})});var O=function(){return Object(d.jsx)("div",{children:Object(d.jsxs)(r.c,{children:[Object(d.jsx)(r.a,{path:"/auth",children:Object(d.jsx)(p,{})}),Object(d.jsx)(r.a,{path:"/contacts",children:Object(d.jsx)(j,{})}),Object(d.jsx)(r.a,{path:"/get-contacts",children:Object(d.jsx)(b,{})}),Object(d.jsx)(r.a,{path:"/",children:Object(d.jsx)(p,{})})]})})},m=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),c(t),a(t),o(t),s(t)}))},g=n(10);s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(g.a,{basename:"/MERN-Contact-List-front",children:Object(d.jsx)(O,{})})}),document.getElementById("root")),m()}},[[40,1,2]]]);
//# sourceMappingURL=main.2880e621.chunk.js.map